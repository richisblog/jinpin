# 工厂机器布局规划工具

一个现代化的工厂机器布局规划工具，支持实时渲染和自定义机器名称。

## 主要功能

### 🎯 核心功能
- **实时布局规划**：拖拽式机器布局设计
- **自定义机器名称**：支持为每台机器设置自定义名称
- **实时渲染优化**：60fps流畅渲染，放大后文字依然清晰
- **碰撞检测**：智能检测机器重叠，默认不允许叠放
- **响应式设计**：完美适配桌面和移动设备

### 🖥️ 机器类型
- 🚧 障碍物（不可叠放）
- 🖥️ CNC机床
- 🤖 工业机器人
- 📦 传送带
- ⚡ 冲压机
- 🔥 热处理炉
- 📦 仓储区

### ✨ 新功能特性

#### 实时渲染优化
- **60fps流畅渲染**：使用性能优化算法，确保拖拽时流畅体验
- **高清文字显示**：使用高质量字体渲染，放大后文字不发虚
- **智能字体缩放**：根据画布缩放自动调整字体大小
- **文字阴影效果**：增强文字可读性

#### 自定义机器名称
- **预设名称输入**：在添加机器前可预设机器名称
- **实时名称编辑**：在机器列表中可直接编辑机器名称
- **智能默认名称**：空名称时自动使用默认名称
- **即时更新显示**：名称修改后立即在画布上更新

### 🎮 操作说明

#### 桌面端
1. **选择机器**：点击左侧机器类型
2. **自定义名称**：在"机器名称"输入框中输入自定义名称
3. **放置机器**：点击画布空白区域放置机器
4. **移动机器**：拖拽机器调整位置
5. **删除机器**：选中机器后按Delete键删除
6. **编辑名称**：在机器列表中直接编辑机器名称

#### 移动端
1. **触摸选择**：点击机器类型
2. **触摸放置**：点击画布空白区域放置机器
3. **拖拽移动**：触摸拖拽机器调整位置
4. **长按删除**：长按机器显示删除确认

### 🛠️ 技术特性

#### 渲染优化
- Canvas 2D实时渲染
- 防抖更新机制
- 智能重绘策略
- 高质量字体渲染
- **新增：高质量图片导出**
- **新增：独立导出Canvas渲染**
- **新增：动态分辨率支持**

#### 用户体验
- 响应式布局设计
- 触摸设备优化
- 实时反馈机制
- 直观的操作界面

### 📱 兼容性
- ✅ Chrome/Edge (推荐)
- ✅ Firefox
- ✅ Safari
- ✅ 移动端浏览器
- ✅ 触摸设备

### 🚀 快速开始

1. 打开 `index.html` 文件
2. 选择机器类型
3. 输入自定义机器名称（可选）
4. 点击画布放置机器
5. 拖拽调整位置
6. 导出布局文件

### 📄 导出功能
- 支持导出为JSON格式
- 包含完整的布局信息
- 支持后续导入和编辑
- **新增：支持导出为PNG图片**
- **新增：高质量图片渲染**
- **新增：包含标题和导出信息**
- **新增：动态分辨率（场地长度×50 × 场地宽度×50）**
- **新增：200像素边距，确保完整显示**
- **新增：显示实际占用长宽**

---

*工厂机器布局规划工具 - 让工厂规划更简单、更高效*

## 使用方法

### 桌面端操作
1. 选择机器类型
2. 点击"添加机器"或直接在画布上点击放置
3. 拖拽机器调整位置
4. 选中机器后按Delete键删除
5. 在机器列表中调整尺寸和叠放设置

### 移动端操作
1. 选择机器类型
2. 点击"添加机器"或直接在画布上点击放置
3. 触摸拖拽机器调整位置
4. 长按机器显示删除确认对话框
5. 在机器列表中调整尺寸和叠放设置

## 技术特性

- **纯前端实现**：无需服务器，直接在浏览器中运行
- **Canvas绘图**：高性能的2D绘图技术
- **触摸事件支持**：完整的触摸事件处理
- **响应式CSS**：移动优先的响应式设计
- **实时渲染**：高效的画布更新机制

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+
- 移动端浏览器（iOS Safari、Android Chrome等）

## 启动方法

1. 下载所有文件到本地目录
2. 使用任意HTTP服务器启动（如Python、Node.js等）
3. 在浏览器中访问对应地址

### 使用Python启动
```bash
python3 -m http.server 8000
```
然后访问 `http://localhost:8000`

### 使用Node.js启动
```bash
npx http-server
```
然后访问显示的地址

## 文件结构

```
jinpin/
├── index.html      # 主页面
├── styles.css      # 样式文件
├── script.js       # 主要逻辑
└── README.md       # 说明文档
```

## 更新日志

### v2.0.0
- ✨ 新增移动设备触摸操作支持
- ✨ 优化尺寸标注显示（框内显示，简化标注）
- ✨ 添加长按删除功能
- ✨ 实时尺寸调整和验证
- 🎨 改进响应式设计和触摸反馈
- 🔧 优化碰撞检测和叠放逻辑 